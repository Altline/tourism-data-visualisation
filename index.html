<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css" />
    <script src="http://d3js.org/d3.v7.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <title>Turizam u svijetu</title>
</head>

<body>
    <div id="map">
        <svg id="mapSvg" viewBox="0 0 1000 1000" width="100%" height="100%"></svg>
    </div>
    <div id="sidebar">

        <h4>World</h4>
        <svg id="barSvg" class="bar chart" viewBox="0 0 1000 1000" width="100%" height="auto"></svg>

        <div style="
            width: 100%; 
            height: 2px; 
            background-color: gray; 
            margin-top: 15px;">
        </div>

        <h5>Share by country</h5>
        <svg id="pieSvg" class="pie chart" viewBox="0 0 1000 1000" width="100%" height="auto"></svg>

    </div>

    <script>
        function makeSidebar() {
            const sidebar = d3.select("#sidebar");

            const barSvg = sidebar.select("#barSvg");

            const pieSvg = sidebar.select("pieSvg");
        }

        function makeMap() {
            const mapSvg = d3.select("#mapSvg");
            const g = mapSvg.append("g");

            const projection = d3.geoEquirectangular()
                .center([-5, 100])
                .scale(200);

            const path = d3.geoPath()
                .projection(projection);

            d3.json("countries-110m.json").then(function (world) {
                const data = topojson.feature(world, world.objects.countries);
                const countries = g.selectAll("path.country")
                    .data(data.features)
                    .enter()
                    .append("path")
                    .attr("class", "country")
                    .attr("id", function (d) { return d.id; })
                    .attr("d", path)
                    .style("fill", "green")
                    .style("stroke", "black")
                    .style("stroke-width", "0.25px")
                    .style("stroke-opacity", 1);
            });

            const zoom = d3.zoom()
                .scaleExtent([1, 80])
                .on('zoom', function (event) {
                    g.selectAll('path')
                        .attr('transform', event.transform);
                });

            mapSvg.call(zoom);
        }

        makeSidebar();
        makeMap();

    </script>
</body>

</html>